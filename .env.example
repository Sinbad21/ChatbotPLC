# ===================================
# ChatBot Studio - Environment Variables
# ===================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env in the root directory
# 2. Fill in your actual values (remove quotes for most values)
# 3. NEVER commit .env to version control
# 4. Use .env.local for local overrides
#
# DOCUMENTATION: See PROJECT_STATUS.md for detailed feature status
# SECURITY: Keep secrets secure and rotate regularly
#
# ===================================

# ===================================
# DATABASE CONFIGURATION
# ===================================
#
# PostgreSQL connection string (Neon serverless recommended for production)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
#
# REQUIRED: Yes
# EXAMPLE: postgresql://myuser:mypass@ep-cool-name-123.neon.tech/chatbot_db?sslmode=require
# GET FROM: https://neon.tech (free tier available)
#
# NOTES:
# - Use sslmode=require for production
# - Neon provides serverless PostgreSQL with auto-scaling
# - Alternative: Use local PostgreSQL for development
# - For testing, set TEST_DATABASE_URL separately
#
DATABASE_URL="postgresql://user:password@host/chatbot_studio?sslmode=require"

# Test database URL (optional, for running tests)
# REQUIRED: No (defaults to DATABASE_URL if not set)
# USAGE: Used by Vitest for integration tests
# RECOMMENDATION: Use separate test database to avoid data loss
#
TEST_DATABASE_URL="postgresql://user:password@host/chatbot_test?sslmode=require"

# ===================================
# AUTHENTICATION & SECURITY
# ===================================

# JWT secret key for signing access tokens (short-lived, 15 min)
# REQUIRED: Yes
# MINIMUM LENGTH: 32 characters
# GENERATE: openssl rand -base64 32
# SECURITY: Change this immediately in production!
#
JWT_SECRET="your-secret-key-min-32-characters-change-in-production"

# JWT refresh token secret (long-lived, 7 days)
# REQUIRED: Yes
# MINIMUM LENGTH: 32 characters
# GENERATE: openssl rand -base64 32
# NOTE: Should be different from JWT_SECRET
#
JWT_REFRESH_SECRET="your-refresh-secret-min-32-characters-change-in-production"

# JWT token expiration times
# REQUIRED: No (defaults shown below)
# FORMAT: Zeit/ms format (e.g., "15m", "7d", "1h")
# RECOMMENDATION: Keep access tokens short-lived for security
#
JWT_ACCESS_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# Session timeout in milliseconds (default: 30 minutes)
# REQUIRED: No (default: 1800000)
# USAGE: Auto-logout inactive users after this duration
#
SESSION_TIMEOUT_MS=1800000

# Encryption key for sensitive data (API keys, tokens)
# REQUIRED: No (only if storing encrypted API keys)
# LENGTH: Exactly 32 characters for AES-256
# GENERATE: openssl rand -hex 16
#
ENCRYPTION_KEY=""

# ===================================
# API SERVER CONFIGURATION
# ===================================

# API server port
# REQUIRED: No (default: 3001)
# NOTE: Must be different from frontend port (3000)
#
PORT=3001

# Node environment
# REQUIRED: Yes
# VALUES: development | production | test
# EFFECTS:
#   - development: Enables debug logs, detailed errors, hot reload
#   - production: Optimized builds, minimal logs, no source maps
#   - test: Silences logs, uses test database
#
NODE_ENV=development

# API URL for frontend to connect to
# REQUIRED: Yes (for frontend)
# PRODUCTION: Set to your Cloudflare Worker URL
# DEVELOPMENT: http://localhost:3001
# NOTE: Must include protocol (http:// or https://)
#
API_URL="http://localhost:3001"
NEXT_PUBLIC_API_URL="http://localhost:3001"

# Frontend URL for CORS configuration
# REQUIRED: Yes
# USAGE: Whitelist origins for CORS requests
# MULTIPLE: Separate with commas
# EXAMPLE: http://localhost:3000,https://yourdomain.com
#
FRONTEND_URL="http://localhost:3000"
CORS_ORIGINS="http://localhost:3000"

# ===================================
# AI MODEL PROVIDERS
# ===================================

# OpenAI API Key (for GPT-4, GPT-5 Mini, embeddings)
# REQUIRED: Yes (for AI chat functionality)
# GET FROM: https://platform.openai.com/api-keys
# COST: Pay-per-use (GPT-5 Mini: ~$0.15-0.60 per 1M tokens)
# MODELS: gpt-4, gpt-5-mini, text-embedding-3-small
# FEATURES: Chat, document embeddings (if implemented)
#
OPENAI_API_KEY="sk-..."

# Anthropic API Key (for Claude models)
# REQUIRED: No (optional alternative to OpenAI)
# GET FROM: https://console.anthropic.com/
# MODELS: claude-3-opus, claude-3-sonnet, claude-3-haiku
# STATUS: Code ready, not currently used
#
ANTHROPIC_API_KEY="sk-ant-..."

# Google AI API Key (for Gemini models)
# REQUIRED: No (optional alternative to OpenAI)
# GET FROM: https://makersuite.google.com/app/apikey
# MODELS: gemini-pro, gemini-pro-vision
# STATUS: Code ready, not currently used
#
GOOGLE_AI_API_KEY=""

# Default AI model to use
# REQUIRED: No (default: gpt-5-mini)
# OPTIONS: gpt-4, gpt-5-mini, claude-3-sonnet, gemini-pro
# NOTE: Model must match the API key provider
#
DEFAULT_AI_MODEL="gpt-5-mini"

# ===================================
# CLOUDFLARE CONFIGURATION (Production)
# ===================================

# Cloudflare Account ID
# REQUIRED: Yes (for Cloudflare deployment)
# GET FROM: Cloudflare Dashboard > Account Settings
# USAGE: Deploy Workers and Pages
#
CLOUDFLARE_ACCOUNT_ID="your-account-id"

# Cloudflare API Token
# REQUIRED: Yes (for deployment scripts)
# GET FROM: Cloudflare Dashboard > My Profile > API Tokens
# PERMISSIONS: Edit Workers, Edit Pages
#
CLOUDFLARE_API_TOKEN="your-api-token"

# Cloudflare Worker API URL (production)
# REQUIRED: Yes (for production frontend)
# FORMAT: https://[worker-name].[subdomain].workers.dev
# EXAMPLE: https://chatbot-api.myaccount.workers.dev
#
NEXT_PUBLIC_WORKER_API_URL="https://chatbotstudio.youraccount.workers.dev"

# Cloudflare Pages URL (production frontend)
# REQUIRED: Yes (for production)
# FORMAT: https://[pages-name].pages.dev
# CUSTOM DOMAIN: Can configure custom domain in Cloudflare
#
NEXT_PUBLIC_FRONTEND_URL="https://your-app.pages.dev"

# ===================================
# EMAIL CONFIGURATION (SMTP)
# ===================================

# SMTP server hostname
# REQUIRED: Yes (for email features: verification, password reset)
# COMMON PROVIDERS:
#   - Gmail: smtp.gmail.com
#   - SendGrid: smtp.sendgrid.net
#   - Mailgun: smtp.mailgun.org
#   - AWS SES: email-smtp.[region].amazonaws.com
#
SMTP_HOST="smtp.gmail.com"

# SMTP server port
# REQUIRED: Yes
# COMMON PORTS:
#   - 587: TLS (recommended)
#   - 465: SSL
#   - 25: Unencrypted (not recommended)
#
SMTP_PORT=587

# SMTP username
# REQUIRED: Yes
# GMAIL: Your Gmail address
# SENDGRID: "apikey" (literal string)
# OTHERS: Provided by email service
#
SMTP_USER="your-email@gmail.com"

# SMTP password or API key
# REQUIRED: Yes
# GMAIL: App-specific password (not your Gmail password!)
#         Generate at: https://myaccount.google.com/apppasswords
# SENDGRID: Your SendGrid API key
# SECURITY: Never commit this to version control!
#
SMTP_PASS="your-app-specific-password"

# "From" email address
# REQUIRED: Yes
# FORMAT: email@domain.com or "Name <email@domain.com>"
# NOTE: Must be verified with your email provider
#
SMTP_FROM="ChatBot Studio <noreply@yourdomain.com>"

# Email service for transactional emails
# REQUIRED: No (default: smtp)
# OPTIONS: smtp | sendgrid | mailgun | ses
# NOTE: Additional configuration may be needed per service
#
EMAIL_SERVICE="smtp"

# ===================================
# PAYMENT PROCESSING (Stripe)
# ===================================

# Stripe secret key (server-side)
# REQUIRED: No (only if using billing features)
# GET FROM: https://dashboard.stripe.com/apikeys
# TYPES:
#   - Test keys: sk_test_... (for development)
#   - Live keys: sk_live_... (for production)
# FEATURES: Subscriptions, payments, invoices
#
STRIPE_SECRET_KEY="sk_test_..."

# Stripe publishable key (client-side)
# REQUIRED: No (only if using billing features)
# SAFE: Can be exposed to frontend
# TYPES:
#   - Test keys: pk_test_...
#   - Live keys: pk_live_...
#
STRIPE_PUBLISHABLE_KEY="pk_test_..."
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Stripe webhook signing secret
# REQUIRED: No (only if using Stripe webhooks)
# GET FROM: Stripe Dashboard > Webhooks
# USAGE: Verify webhook authenticity
# FORMAT: whsec_...
#
STRIPE_WEBHOOK_SECRET="whsec_..."

# Stripe pricing plan IDs
# REQUIRED: No (only if using predefined plans)
# GET FROM: Stripe Dashboard > Products
# USAGE: Map plan tiers to Stripe price IDs
#
STRIPE_PLAN_FREE=""
STRIPE_PLAN_STARTER="price_..."
STRIPE_PLAN_PROFESSIONAL="price_..."
STRIPE_PLAN_ENTERPRISE="price_..."

# ===================================
# FILE UPLOAD & STORAGE
# ===================================

# Maximum file size in bytes
# REQUIRED: No (default: 26214400 = 25MB)
# CALCULATION: 1 MB = 1048576 bytes
# EXAMPLES:
#   - 10 MB: 10485760
#   - 25 MB: 26214400
#   - 50 MB: 52428800
#
MAX_FILE_SIZE=26214400

# Upload directory (local storage)
# REQUIRED: No (default: ./uploads)
# PRODUCTION: Use /tmp for Cloudflare Workers (ephemeral)
# RECOMMENDATION: Use cloud storage (S3, R2, GCS) for production
#
UPLOAD_DIR="./uploads"

# Allowed file types for document upload
# REQUIRED: No (default: pdf,txt,md,docx)
# FORMAT: Comma-separated extensions without dots
# SECURITY: Limit to safe document types
#
ALLOWED_FILE_TYPES="pdf,txt,md,docx"

# Cloud storage configuration (optional)
# REQUIRED: No (for persistent file storage)
# OPTIONS: s3 | r2 | gcs | azure
#
STORAGE_PROVIDER=""
STORAGE_BUCKET=""
STORAGE_REGION=""
STORAGE_ACCESS_KEY=""
STORAGE_SECRET_KEY=""

# ===================================
# MULTI-CHANNEL INTEGRATIONS
# ===================================
# STATUS: Code ready but not yet connected
# REQUIREMENTS: Setup webhook endpoints and verify domains

# WhatsApp Business API
# REQUIRED: No (optional feature)
# GET FROM: https://business.facebook.com/
# SETUP:
#   1. Create WhatsApp Business Account
#   2. Set up Meta App and WhatsApp API
#   3. Verify business and phone number
#   4. Generate API key and get phone number ID
# WEBHOOK: /api/v1/webhooks/whatsapp
#
WHATSAPP_API_KEY=""
WHATSAPP_PHONE_NUMBER_ID=""
WHATSAPP_WEBHOOK_VERIFY_TOKEN="random-secret-token-for-verification"

# Telegram Bot
# REQUIRED: No (optional feature)
# GET FROM: Talk to @BotFather on Telegram
# SETUP:
#   1. Send /newbot to @BotFather
#   2. Follow prompts to create bot
#   3. Receive bot token
#   4. Set webhook: /api/v1/webhooks/telegram
# DOCS: https://core.telegram.org/bots/api
#
TELEGRAM_BOT_TOKEN=""
TELEGRAM_WEBHOOK_SECRET="random-secret-for-webhook-validation"

# Slack App
# REQUIRED: No (optional feature)
# GET FROM: https://api.slack.com/apps
# SETUP:
#   1. Create new Slack app
#   2. Enable Socket Mode or Request URL
#   3. Add bot scopes (chat:write, channels:read)
#   4. Install app to workspace
# WEBHOOK: /api/v1/webhooks/slack
#
SLACK_BOT_TOKEN=""
SLACK_SIGNING_SECRET=""
SLACK_APP_ID=""

# Discord Bot
# REQUIRED: No (optional feature)
# GET FROM: https://discord.com/developers/applications
# SETUP:
#   1. Create application
#   2. Add bot user
#   3. Enable required intents
#   4. Get bot token and application ID
# WEBHOOK: /api/v1/webhooks/discord
#
DISCORD_BOT_TOKEN=""
DISCORD_APPLICATION_ID=""
DISCORD_PUBLIC_KEY=""

# ===================================
# RATE LIMITING
# ===================================

# Rate limit for chat endpoint (requests per IP per minute)
# REQUIRED: No (default: 60)
# USAGE: Prevent API abuse on public endpoints
# RECOMMENDATION: Lower for free tier (10-30), higher for paid (60-120)
#
CHAT_RATE_LIMIT=60

# Rate limit for authentication endpoints (requests per IP per 15 min)
# REQUIRED: No (default: 5)
# USAGE: Prevent brute force attacks
# SECURITY: Keep low (5-10 attempts)
#
AUTH_RATE_LIMIT=5

# Disable rate limiting (development only!)
# REQUIRED: No (default: false)
# VALUES: true | false
# WARNING: Never set to true in production!
#
DISABLE_RATE_LIMIT=false

# ===================================
# MONITORING & ANALYTICS
# ===================================

# Sentry DSN for error tracking
# REQUIRED: No (optional but recommended for production)
# GET FROM: https://sentry.io/
# USAGE: Track errors and performance in production
# BENEFITS: Error alerts, stack traces, user context
#
SENTRY_DSN=""

# Sentry environment
# REQUIRED: No (default: NODE_ENV)
# VALUES: development | staging | production
# USAGE: Separate errors by environment
#
SENTRY_ENVIRONMENT="production"

# Google Analytics measurement ID
# REQUIRED: No (optional for tracking usage)
# GET FROM: https://analytics.google.com/
# FORMAT: G-XXXXXXXXXX
# USAGE: Track page views, user behavior, conversions
#
NEXT_PUBLIC_GA_ID=""

# DataDog API key for logging and metrics
# REQUIRED: No (optional for advanced monitoring)
# GET FROM: https://www.datadoghq.com/
# USAGE: Centralized logging, APM, infrastructure monitoring
#
DATADOG_API_KEY=""

# Log level
# REQUIRED: No (default: info in production, debug in development)
# VALUES: trace | debug | info | warn | error | fatal | silent
# EFFECTS:
#   - trace: Most verbose, all logs
#   - debug: Development debugging
#   - info: General information (production default)
#   - warn: Warnings only
#   - error: Errors only
#   - silent: No logs (testing)
#
LOG_LEVEL="info"

# ===================================
# FEATURE FLAGS
# ===================================

# Enable experimental features (not production-ready)
# REQUIRED: No (default: false)
# USAGE: Test new features without affecting production
#
ENABLE_EXPERIMENTAL_FEATURES=false

# Enable vector search with embeddings
# REQUIRED: No (default: false)
# STATUS: Not yet implemented (future feature)
# REQUIREMENTS: OpenAI embeddings API, vector database
#
ENABLE_VECTOR_SEARCH=false

# Enable multi-channel integrations
# REQUIRED: No (default: false)
# STATUS: Code ready, requires webhook setup
#
ENABLE_MULTI_CHANNEL=false

# Enable billing features
# REQUIRED: No (default: false)
# REQUIREMENTS: Stripe configuration
#
ENABLE_BILLING=false

# ===================================
# DEVELOPMENT & DEBUGGING
# ===================================

# Enable debug mode (verbose logging)
# REQUIRED: No (default: false)
# USAGE: Additional debug information in logs
# WARNING: Do not enable in production (performance impact)
#
DEBUG=false

# Enable pretty error pages
# REQUIRED: No (default: false in production)
# USAGE: Show detailed error pages with stack traces
# SECURITY: Only enable in development!
#
PRETTY_ERRORS=true

# Skip email verification (development only!)
# REQUIRED: No (default: false)
# USAGE: Skip email verification step for faster testing
# WARNING: Never enable in production!
#
SKIP_EMAIL_VERIFICATION=false

# Mock external API calls (testing)
# REQUIRED: No (default: false)
# USAGE: Use mock responses instead of real API calls
# USE CASE: Testing without using API credits
#
MOCK_EXTERNAL_APIS=false

# ===================================
# ADDITIONAL OPTIONAL SERVICES
# ===================================

# Redis URL for caching and rate limiting
# REQUIRED: No (optional for better performance)
# GET FROM: Redis Cloud, AWS ElastiCache, or self-hosted
# FORMAT: redis://username:password@host:port
# BENEFITS: Faster rate limiting, session storage, caching
#
REDIS_URL=""

# S3-compatible storage (alternative to local storage)
# REQUIRED: No (optional for production file storage)
# PROVIDERS: AWS S3, Cloudflare R2, DigitalOcean Spaces
#
S3_ENDPOINT=""
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""
S3_BUCKET=""
S3_REGION=""

# Webhook URL for notifications
# REQUIRED: No (optional for external integrations)
# USAGE: Send notifications to Slack, Discord, etc.
# FORMAT: https://hooks.slack.com/services/...
#
WEBHOOK_URL=""

# ===================================
# END OF CONFIGURATION
# ===================================
#
# NEXT STEPS:
# 1. Fill in required values (marked as REQUIRED: Yes)
# 2. Set up database: cd packages/database && npx prisma migrate deploy
# 3. Generate Prisma client: npx prisma generate
# 4. Start development: npm run dev
# 5. Access app: http://localhost:3000
#
# SECURITY CHECKLIST:
# ☐ Changed all default secrets
# ☐ Generated strong JWT secrets (32+ chars)
# ☐ Configured CORS origins
# ☐ Set up rate limiting
# ☐ Configured SMTP for production
# ☐ Never committed .env to Git
#
# DOCUMENTATION:
# - Project status: PROJECT_STATUS.md
# - Setup guide: SETUP_AND_DEPLOY.md
# - API docs: TEST_COMMANDS.md
# - Main README: README.md
#
# SUPPORT:
# - GitHub Issues: https://github.com/Sinbad21/Chatbot/issues
# - Documentation: See markdown files in project root
#
